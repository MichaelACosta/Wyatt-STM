<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Wyatt-STM: C:/projects/Wyatt-STM/wstm/channel.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wyatt-STM
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Software transactional memory system developed at Wyatt Technology</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e2fa8c43e80b9633ea89c2a0a4055ee7.html">wstm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">channel.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="channel_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2015, Wyatt Technology Corporation</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// met:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// 1. Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// 2. Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// notice, this list of conditions and the following disclaimer in the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// 3. Neither the name of the copyright holder nor the names of its</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// contributors may be used to endorse or promote products derived from</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// this software without specific prior written permission.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;exports.h&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stm_8h.html">stm.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;boost/optional.hpp&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;boost/signals2.hpp&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="namespace_w_s_t_m.html">   47</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_w_s_t_m.html">WSTM</a></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   <span class="keyword">namespace  </span>Internal</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keyword">struct </span>WChannelCoreNodeBase</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      {};</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordtype">void</span> WSTM_LIBAPI IncrementNumNodes (WChannelCoreNodeBase* node_p);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="keywordtype">void</span> WSTM_LIBAPI DecrementNumNodes (WChannelCoreNodeBase* node_p);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="keywordtype">int</span> WSTM_LIBAPI GetNumNodes ();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      std::vector&lt;size_t&gt; WSTM_LIBAPI GetExistingNodeNums ();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordtype">size_t</span> WSTM_LIBAPI GetMaxNodeNum ();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keyword">struct </span>WChannelCore</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;         <span class="keyword">using</span> ReaderInitFunc = std::function&lt;Data_t (WAtomic&amp;)&gt;;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;         <span class="keyword">struct </span>WNode : <span class="keyword">public</span> WChannelCoreNodeBase</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;         {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            Data_t m_data;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;std::shared_ptr&lt;WNode&gt;</a>&gt; m_next_v;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordtype">bool</span> m_initial;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;               </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            WNode (<span class="keyword">const</span> Data_t&amp; data):</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;               m_data (data),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;               m_initial (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;               IncrementNumNodes (<span class="keyword">this</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keyword">static</span> std::shared_ptr&lt;WNode&gt; CreateInitialNode (<span class="keyword">const</span> Data_t&amp; data, <span class="keyword">const</span> std::shared_ptr&lt;WNode&gt;&amp; next_p, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;               <span class="keyword">auto</span> node_p = std::make_shared&lt;WNode&gt; (data);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;               node_p-&gt;m_next_v.Set (next_p, at);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;               node_p-&gt;m_initial = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;               <span class="keywordflow">return</span> node_p;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;               </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            WNode ():</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;               m_initial (<span class="keyword">false</span>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;               IncrementNumNodes (<span class="keyword">this</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            ~WNode ()</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;               DecrementNumNodes (<span class="keyword">this</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;         };</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;         <span class="keyword">using</span> WWriteSignal = boost::signals2::signal&lt;void ()&gt;;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         std::shared_ptr&lt;WWriteSignal&gt; m_writeSignal_p;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;std::shared_ptr&lt;WNode&gt;</a>&gt; m_next_v;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         ReaderInitFunc m_readerInit;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;int&gt;</a> m_numReaders_v;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         WChannelCore (ReaderInitFunc readerInit):</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            m_writeSignal_p (std::make_shared&lt;WWriteSignal&gt;()),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            m_next_v (std::make_shared&lt;WNode&gt; ()),</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            m_readerInit (readerInit),</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            m_numReaders_v (0)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         {}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;         <span class="keyword">struct </span>WEmitSignal</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            std::weak_ptr&lt;WWriteSignal&gt; m_sig_p;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            WEmitSignal (<span class="keyword">const</span> std::shared_ptr&lt;WWriteSignal&gt;&amp; sig_p): m_sig_p (sig_p) {}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordtype">void</span> operator () ()</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;               std::shared_ptr&lt;WWriteSignal&gt; sig_p = m_sig_p.lock ();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;               <span class="keywordflow">if</span> (sig_p)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;               {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                  (*sig_p) ();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;               }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;         };</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         <span class="keywordtype">void</span> Write (<span class="keyword">const</span> Data_t&amp; data, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;         {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">if</span> (m_numReaders_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at) == 0)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;               <span class="comment">//This is not just a performance optimization, if we build up a list of new nodes</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;               <span class="comment">//when there aren&#39;t any readers then we can get a stack overflow. When the</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;               <span class="comment">//transaction commits and there are no readers then the head node of the list of new</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;               <span class="comment">//nodes will be dropped triggering a cascade of shared_ptr destrucors overflowing the</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;               <span class="comment">//stack. So if there no readers we just drop the messages here. </span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;               <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keyword">auto</span> newNode_p = std::make_shared&lt;WNode&gt; (data);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keyword">auto</span> cur_p = m_next_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span> (cur_p)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;               cur_p-&gt;m_next_v.Set (newNode_p, at);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            m_next_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (newNode_p, at);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            at.<a class="code" href="class_w_s_t_m_1_1_w_atomic.html#a0eb66ce8f77e9f6fcfc3b3ddd1d25f86">After</a> (WEmitSignal (m_writeSignal_p));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         std::shared_ptr&lt;WNode&gt; AddReader (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            m_numReaders_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (m_numReaders_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at) + 1, at);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keyword">auto</span> next_p = m_next_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (m_readerInit)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;               <span class="keywordflow">return</span> WNode::CreateInitialNode (m_readerInit (at), next_p, at);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;               <span class="keywordflow">return</span> next_p;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;         <span class="keywordtype">void</span> RemoveReader (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;         {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> numReaders = m_numReaders_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">if</span> (numReaders &gt; 0)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;               m_numReaders_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (numReaders - 1, at);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;               <span class="comment">//we can&#39;t assert until the transaction commits, we might be in an inconsistent state</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;               <span class="comment">//that will be rolled back </span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;               at.<a class="code" href="class_w_s_t_m_1_1_w_atomic.html#a0eb66ce8f77e9f6fcfc3b3ddd1d25f86">After</a> ([numReaders](){assert (numReaders &gt; 0);});</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#endif //_DEBUG</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      };</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   </div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="struct_w_s_t_m_1_1_w_channel_error.html">  207</a></span>&#160;   <span class="keyword">struct </span>WSTM_CLASSAPI <a class="code" href="struct_w_s_t_m_1_1_w_channel_error.html">WChannelError</a></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="struct_w_s_t_m_1_1_w_channel_error.html">WChannelError</a> (<span class="keyword">const</span> std::string&amp; msg);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="struct_w_s_t_m_1_1_w_channel_error.html#a74296d177caedd8f58960a6a8c6f7df1">  217</a></span>&#160;      std::string <a class="code" href="struct_w_s_t_m_1_1_w_channel_error.html#a74296d177caedd8f58960a6a8c6f7df1">m_msg</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   };</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">  223</a></span>&#160;   <span class="keyword">struct </span>WSTM_CLASSAPI <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> : <span class="keyword">public</span> <a class="code" href="struct_w_s_t_m_1_1_w_channel_error.html">WChannelError</a></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   };</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html">  244</a></span>&#160;   <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel</a> : <span class="keyword">public</span> boost::noncopyable</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html">WChannelWriter</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keyword">using</span> Core = Internal::WChannelCore&lt;Data_t&gt;;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keyword">using</span> CorePtr = std::shared_ptr&lt;Core&gt;;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      CorePtr m_core_p;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#abd107a26fe4bde3b68e8b7af87a235f9">  256</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#abd107a26fe4bde3b68e8b7af87a235f9">Data</a> = Data_t;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">  264</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">WReaderInitFunc</a> = std::function&lt;Data_t (WAtomic&amp;)&gt;;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         </div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#aa0ef9da779746135a92ec9e335c893bc">  274</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel.html#aa0ef9da779746135a92ec9e335c893bc">WChannel</a> (<a class="code" href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">WReaderInitFunc</a> m_readerInit = <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">WReaderInitFunc</a> ()):</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         m_core_p (std::make_shared&lt;Internal::WChannelCore&lt;Data_t&gt;&gt; (m_readerInit))</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      {}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a98e7bce663cccfaee70b89e9051389b7">  286</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a98e7bce663cccfaee70b89e9051389b7">WChannel</a> (<a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel</a>&amp;&amp; c):</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         m_core_p (std::move (c.m_core_p))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      {}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a080a7ef123fd63de2c90830ebb39e1d4">  290</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel</a>&amp; <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a080a7ef123fd63de2c90830ebb39e1d4">operator=</a>(<a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel</a>&amp;&amp; c)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         m_core_p = std::move (c.m_core_p);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      </div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a19a50aec1253c74f28093d6f35dc853f">  306</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a19a50aec1253c74f28093d6f35dc853f">SetReaderInitFunc</a> (<a class="code" href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">WReaderInitFunc</a> readerInit)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;         m_core_p-&gt;m_readerInit = readerInit;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a5ef2ae7785c3fc9fd979cef7fdc3ea05">  318</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a5ef2ae7785c3fc9fd979cef7fdc3ea05">Write</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#abd107a26fe4bde3b68e8b7af87a235f9">Data</a>&amp; data, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;         m_core_p-&gt;Write (data, at);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a989445aae77943e93c08901b5c5f8a6a">  329</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a989445aae77943e93c08901b5c5f8a6a">Write</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#abd107a26fe4bde3b68e8b7af87a235f9">Data</a>&amp; data)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){m_core_p-&gt;Write (data, at);});</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         </div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a150f3f40aa8d88f3515794ac5066f18a">  339</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a150f3f40aa8d88f3515794ac5066f18a">WWriteSignal</a> = boost::signals2::signal&lt;void ()&gt;;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Handler_t&gt;</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel.html#a181dd845e2f95f3600b28b766ffd4ae4">  351</a></span>&#160;      <span class="keyword">auto</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html#a181dd845e2f95f3600b28b766ffd4ae4">ConnectToWriteSignal</a> (Handler_t&amp;&amp; h)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         <span class="keywordflow">return</span> m_core_p-&gt;m_writeSignal_p-&gt;connect (h);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   };</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html">  367</a></span>&#160;   <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#abe73dfd492e7a5c5daa8c9fe69435750">  373</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#abe73dfd492e7a5c5daa8c9fe69435750">Data</a> = Data_t;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         </div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a4ce8bd6cbe435abedeafb15a6e23ee56">  378</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a4ce8bd6cbe435abedeafb15a6e23ee56">WReadOnlyChannel</a> ()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      {}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a86eeae773103faa4f87cb9ba5d6edb29">  386</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a86eeae773103faa4f87cb9ba5d6edb29">WReadOnlyChannel</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data&gt;</a>&amp; chan)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">Init</a> (chan);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#aa6b5001db31b9168d0d3062319e09203">  397</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#aa6b5001db31b9168d0d3062319e09203">WReadOnlyChannel</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp; chan)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">Init</a> (chan);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#add6c0ce499a25ed7e0150ef673231a66">  411</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#add6c0ce499a25ed7e0150ef673231a66">WReadOnlyChannel</a> (<a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp;&amp; c):</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;         m_core_v (std::move (c.m_core_v))</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      {}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a89169c9d91bf50be56413b2bd53aec12">  415</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp; <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a89169c9d91bf50be56413b2bd53aec12">operator=</a>(<a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp;&amp; c)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      {   </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         m_core_v = std::move (c.m_core_v);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">  430</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; chan)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){this-&gt;<a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">Init</a> (chan, at);});</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      }</div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a05e8434e8fb9a28f20c6be5e836cb39a">  434</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a05e8434e8fb9a28f20c6be5e836cb39a">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; chan, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (chan.m_core_p, at);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a8310dab43cb03c9c76ffade44924850c">  450</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a8310dab43cb03c9c76ffade44924850c">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp; chan)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){this-&gt;<a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">Init</a> (chan, at);});</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#af11fef99dcf97ec0f1482bfe04cef5de">  454</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#af11fef99dcf97ec0f1482bfe04cef5de">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel</a>&amp; chan, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;         <span class="keyword">auto</span> chan_p = chan.m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at).lock ();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;         m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (chan_p, at);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a84d06a0e61534f062d2172b10897dcbd">  466</a></span>&#160;      <span class="keyword">operator</span> bool ()<span class="keyword"> const</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="keyword">      </span>{</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;         <span class="keywordflow">return</span> !m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a8c7b758c1fc6b797541ae3bcff90e9c7">GetReadOnly</a> ().expired ();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a70e94e75dfed945f3ed349a4794f52d7">  475</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a70e94e75dfed945f3ed349a4794f52d7">Release</a> ()</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){this-&gt;<a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a70e94e75dfed945f3ed349a4794f52d7">Release</a> (at);});</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      }</div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#aff402f24cfa6cda54b4353fbd0595e93">  479</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#aff402f24cfa6cda54b4353fbd0595e93">Release</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (CoreWPtr (), at);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Handler_t&gt;</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_read_only_channel.html#a75e70c90a0b854743ab8b292269edca0">  498</a></span>&#160;      <span class="keyword">auto</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html#a75e70c90a0b854743ab8b292269edca0">ConnectToWriteSignal</a> (Handler_t&amp;&amp; h, <a class="code" href="group___core.html#ga9221933830131a2a911836b17028ab05">NO_ATOMIC</a>)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;         <span class="keyword">auto</span> core_p = m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a8c7b758c1fc6b797541ae3bcff90e9c7">GetReadOnly</a> ().lock ();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         <span class="keywordflow">if</span> (core_p)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordflow">return</span> core_p-&gt;m_writeSignal_p-&gt;connect (h);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();               </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;         }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keyword">typedef</span> std::weak_ptr&lt;Internal::WChannelCore&lt;Data_t&gt;&gt; CoreWPtr;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;CoreWPtr&gt;</a> m_core_v;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   };</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html">  524</a></span>&#160;   <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html">WChannelWriter</a></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keyword">using</span> Core = Internal::WChannelCore&lt;Data_t&gt;;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keyword">using</span> CorePtr = std::shared_ptr&lt;Core&gt;;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#ac4358b217d961d8024705d09ead3bdc9">  530</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ac4358b217d961d8024705d09ead3bdc9">Data</a> = Data_t;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         </div>
<div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#ab3a4586715998fcaab63823dae4e9695">  536</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ab3a4586715998fcaab63823dae4e9695">WChannelWriter</a> ()</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      {}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;         </div>
<div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#a54792aef64fb15119a26623f26227490">  544</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#a54792aef64fb15119a26623f26227490">WChannelWriter</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; chan)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#a1107e3c7cb809f280e7d2537ff4d201b">Init</a> (chan);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#a1107e3c7cb809f280e7d2537ff4d201b">  554</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#a1107e3c7cb809f280e7d2537ff4d201b">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; chan)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         m_core_p = chan.m_core_p;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#a335bac4cf538ec2b5e5e3385fb0ad385">  567</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#a335bac4cf538ec2b5e5e3385fb0ad385">WChannelWriter</a> (<a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html">WChannelWriter</a>&amp;&amp; c):</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;         m_core_p (std::move (c.m_core_p))</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      {}</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#a1479564e4c2d96522d355f41a1a204c1">  571</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html">WChannelWriter</a>&amp; <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#a1479564e4c2d96522d355f41a1a204c1">operator=</a>(<a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html">WChannelWriter</a>&amp;&amp; c)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;         m_core_p = std::move (c.m_core_p);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;         <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      </div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#af57c7141ccb9f2cc5656b8be10ff0980">  581</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#af57c7141ccb9f2cc5656b8be10ff0980">Release</a> ()</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;         m_core_p.reset ();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#a7f21fc34c7116c76ba0e2059bb0b4c18">  589</a></span>&#160;      <span class="keyword">operator</span> bool ()<span class="keyword"> const</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="keyword">      </span>{</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <span class="keywordflow">return</span> !m_core_p.expired ();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#ac02a5942ba1aadce2c7689f8b51a71cd">  604</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ac02a5942ba1aadce2c7689f8b51a71cd">Write</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ac4358b217d961d8024705d09ead3bdc9">Data</a>&amp; data)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         CorePtr core_p = m_core_p.lock ();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;         <span class="keywordflow">if</span> (core_p)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){core_p-&gt;Write (data, at);});</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;         {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;         }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_writer.html#ab4782bc8f19b2fce2693c949ea0f3386">  618</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ab4782bc8f19b2fce2693c949ea0f3386">Write</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_writer.html#ac4358b217d961d8024705d09ead3bdc9">Data</a>&amp; data, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         CorePtr core_p = m_core_p.lock ();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;         <span class="keywordflow">if</span> (core_p)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            core_p-&gt;Write (data, at);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      std::weak_ptr&lt;Core&gt; m_core_p;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html">  649</a></span>&#160;   <span class="keyword">class </span><a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keyword">using</span> Node = <span class="keyword">typename</span> Internal::WChannelCore&lt;Data_t&gt;::WNode;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a53bfc3fefcd9a9d038afc58f7f37de10">  655</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a53bfc3fefcd9a9d038afc58f7f37de10">Data</a> = Data_t;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">  662</a></span>&#160;      <span class="keyword">using</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> = boost::optional&lt;Data&gt;;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a6893c3b42da426b6fb5d03166505d22f">  668</a></span>&#160;      <span class="keyword">virtual</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a6893c3b42da426b6fb5d03166505d22f">~WChannelReader</a> () </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      {}</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      </div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a66184ff1cf5e75906fed71e39d70fef3">  676</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a66184ff1cf5e75906fed71e39d70fef3">WChannelReader</a> ():</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      {}</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#aebf57674122b662f9a325eaec2669d74">  691</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#aebf57674122b662f9a325eaec2669d74">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data&gt;</a>&amp; ch):</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">Init</a> (ch);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#af27e6b28b0e4c70db0b5af548ae93cb0">  697</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#af27e6b28b0e4c70db0b5af548ae93cb0">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at):</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">Init</a> (ch, at);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a67e303476bff595e8aa537d1bcda524f">  703</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a67e303476bff595e8aa537d1bcda524f">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data&gt;</a>&amp; ch):</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">Init</a> (ch);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div>
<div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#ad764ef52b2c077febdd2000f167d39b1">  709</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ad764ef52b2c077febdd2000f167d39b1">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at):</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">Init</a> (ch, at);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a307754214a87b7ea130c895b8ebde5e2">  727</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a307754214a87b7ea130c895b8ebde5e2">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; reader):</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){this-&gt;<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">Copy</a> (reader, at);});</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a22ef930c845c71702eb82c1a4d4421bc">  733</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a22ef930c845c71702eb82c1a4d4421bc">WChannelReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; reader, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at):</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;         m_data_p (std::make_unique&lt;WData&gt;())</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">Copy</a> (reader, at);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">  739</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">Copy</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; reader, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         m_data_p-&gt;Release (at);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <span class="keyword">auto</span> core_p = reader.m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <span class="keywordflow">if</span> (core_p)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            m_data_p-&gt;m_cur_v.Set (core_p-&gt;AddReader (at), at);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;         {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            m_data_p-&gt;m_cur_v.Set (<span class="keyword">nullptr</span>, at);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         m_data_p-&gt;m_core_v.Set (core_p, at);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a330cd2ed89a1f60c94f1584de0df422d">  763</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a330cd2ed89a1f60c94f1584de0df422d">WChannelReader</a> (<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp;&amp; c):</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         m_data_p (std::move (c.m_data_p))</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      {}</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div>
<div class="line"><a name="l00767"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a6cc72f7d909a41ea8459400143596db5">  767</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a6cc72f7d909a41ea8459400143596db5">operator=</a>(<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp;&amp; c)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         m_data_p = std::move (c.m_data_p);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;         <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      </div>
<div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a69abd651fcadd5861be3e630f3ae460c">  782</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a6cc72f7d909a41ea8459400143596db5">operator= </a>(<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader</a>&amp; reader)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">Copy</a> (reader, at);});</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;         <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">  800</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data&gt;</a>&amp; ch)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){InitFromChannel (ch, at);});</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a9659a4e588a67fa4c38d74ea2730e768">  805</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a9659a4e588a67fa4c38d74ea2730e768">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         InitFromChannel (ch, at);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      </div>
<div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#ae75d13e1963d7601239f0ff7a1277ece">  810</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ae75d13e1963d7601239f0ff7a1277ece">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data&gt;</a>&amp; ch)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){InitFromReadonlyChannel (ch, at);});</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a60a9518b7dc0d6074cb6efb0a9a2a6d4">  815</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a60a9518b7dc0d6074cb6efb0a9a2a6d4">Init</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         InitFromReadonlyChannel (ch, at);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a85295e6a8345f62fef2e174907a9de94">  828</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a85295e6a8345f62fef2e174907a9de94">Release</a> ()</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;         <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){m_data_p-&gt;Release (at);});</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div>
<div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a214da37d360303c51143019c72bfe96a">  833</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a214da37d360303c51143019c72bfe96a">Release</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         m_data_p-&gt;Release (at);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a93867f10543cedc0eace630bf2d467c9">  847</a></span>&#160;      <span class="keyword">operator</span> bool ()<span class="keyword"> const</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="keyword">      </span>{</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a37c5f844fc4d4e0a4589c7d5002be9d8">Valid</a> (at);});</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a37c5f844fc4d4e0a4589c7d5002be9d8">  852</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a37c5f844fc4d4e0a4589c7d5002be9d8">Valid</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)<span class="keyword"> const</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="keyword">      </span>{</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         <span class="keyword">auto</span> cur_p = m_data_p-&gt;m_cur_v.Get (at);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         CorePtr core_p = m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;         <span class="keywordflow">return</span> (cur_p &amp;&amp; core_p);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      </div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a898cc03dbe4042b846ebb3df4a24aafa">  869</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a898cc03dbe4042b846ebb3df4a24aafa">Wait</a> (<span class="keyword">const</span> <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html">WTimeArg</a>&amp; timeout = <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html#a34264c61a82f2f25f87f8c9189157fab">WTimeArg::Unlimited</a> ())</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;         <span class="keywordflow">try</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;         {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a4f8b7c5cadf15ce0f0471f9c7d26d4c0">RetryIfEmpty</a> (at, timeout);});</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;         }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;         <span class="keywordflow">catch</span> (<a class="code" href="struct_w_s_t_m_1_1_w_retry_timeout_exception.html">WRetryTimeoutException</a>&amp;)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;         }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a4f8b7c5cadf15ce0f0471f9c7d26d4c0">  891</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a4f8b7c5cadf15ce0f0471f9c7d26d4c0">RetryIfEmpty</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at, <span class="keyword">const</span> <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html">WTimeArg</a>&amp; timeout = <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html#a34264c61a82f2f25f87f8c9189157fab">WTimeArg::Unlimited</a> ())</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;         CorePtr core_p = m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;         <span class="keywordflow">if</span> (!core_p)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;         }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;         <span class="keyword">auto</span> cur_p = m_data_p-&gt;m_cur_v.Get (at);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;         <span class="keywordflow">if</span> (!cur_p)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;         {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;         }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;         <span class="keyword">auto</span> next_p = cur_p-&gt;m_next_v.Get (at);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         <span class="keywordflow">if</span> (!next_p)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;         {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <a class="code" href="group___core.html#gac553425cfd41fcf60669313f91a162a3">Retry</a> (at, timeout);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;         }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a9b527fc69da36e7e3ec572b1af21acb7">  923</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a9b527fc69da36e7e3ec572b1af21acb7">Peek</a> ()</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a9b527fc69da36e7e3ec572b1af21acb7">Peek</a> (at);});</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#aaa33415cac0a708893336f50ec365f21">  928</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#aaa33415cac0a708893336f50ec365f21">Peek</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         CorePtr core_p = m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="keywordflow">if</span> (!core_p)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;         }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;         <span class="keyword">auto</span> cur_p = m_data_p-&gt;m_cur_v.Get (at);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;         <span class="keywordflow">if</span> (!cur_p)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;         {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;         }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;         <span class="keyword">auto</span> next_p = cur_p-&gt;m_next_v.Get (at);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         <span class="keywordflow">if</span> (next_p)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;         {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> data_o = <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> (next_p-&gt;m_data);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">return</span> data_o;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;         }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;         {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> ();</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;         }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="keyword">class </span>WDeadNodeQueue</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;         std::deque&lt;std::shared_ptr&lt;Node&gt;&gt; m_nodes;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keyword">public</span>:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         ~WDeadNodeQueue ()</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;         {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="comment">//need to clear nodes from front to back in order to avoid the stack overflow due to how</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="comment">//the nodes are linked</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">while</span> (!m_nodes.empty ())</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;               m_nodes.pop_front ();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;         }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;         <span class="keywordtype">void</span> Push (<span class="keyword">const</span> std::shared_ptr&lt;Node&gt;&amp; node_p)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            m_nodes.push_back (node_p);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;         }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      };</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      WTransactionLocalValue&lt;std::shared_ptr&lt;WDeadNodeQueue&gt;&gt; m_deadNodes;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordtype">void</span> SaveDeadNode (<span class="keyword">const</span> std::shared_ptr&lt;Node&gt;&amp; node_p, WAtomic&amp; at)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;         <span class="comment">//In order to avoid stack overflows when a lot of nodes are read in a single transaction we</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;         <span class="comment">//need to capture the nodes in a deque that will be emptied iteratively when the transaction</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         <span class="comment">//is done.</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;         <span class="keyword">auto</span> deadNodes_p = std::shared_ptr&lt;WDeadNodeQueue&gt;();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;         <span class="keywordflow">if</span> (<span class="keyword">auto</span> deadNodes_pp = m_deadNodes.Get (at))</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            deadNodes_p = *deadNodes_pp;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;         }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            deadNodes_p = std::make_shared&lt;WDeadNodeQueue&gt;();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            m_deadNodes.Set (deadNodes_p, at);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="comment">//We need the following &quot;After action&quot; in order to force the dead nodes to stick around</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="comment">//long enough in the commit cycle to avoid the stack overflow</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            at.After ([deadNodes_p]() {});</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;         }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         deadNodes_p-&gt;Push (node_p);         </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#ac401ab38adce4236ce0f7627b07561fc"> 1015</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ac401ab38adce4236ce0f7627b07561fc">ReadRetry</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at, <span class="keyword">const</span> <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html">WTimeArg</a>&amp; timeout = <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html#a34264c61a82f2f25f87f8c9189157fab">WTimeArg::Unlimited</a> ())</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;         CorePtr core_p = m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         <span class="keywordflow">if</span> (!core_p)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;         <span class="keyword">auto</span> cur_p = m_data_p-&gt;m_cur_v.Get (at);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;         <span class="keywordflow">if</span> (!cur_p)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;         {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;         }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         SaveDeadNode (cur_p, at);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;         </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="keywordflow">if</span> (cur_p-&gt;m_initial)</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         {</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            m_data_p-&gt;m_cur_v.Set (cur_p-&gt;m_next_v.Get (at), at);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordflow">return</span> cur_p-&gt;m_data;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;         }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;         <span class="keyword">auto</span> next_p = cur_p-&gt;m_next_v.Get (at);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         <span class="keywordflow">if</span> (next_p)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> data_o = <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> (next_p-&gt;m_data);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            m_data_p-&gt;m_cur_v.Set (next_p, at);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <span class="keywordflow">return</span> data_o;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         }</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <a class="code" href="group___core.html#gac553425cfd41fcf60669313f91a162a3">Retry</a> (at, timeout);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="comment">//Retry throws an exception, this is just here to satisfy</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="comment">//a compiler warning</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="keywordflow">return</span> boost::none;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      </div>
<div class="line"><a name="l01064"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a49d89009bd830a19b4b1c59b6911ff2d"> 1064</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a49d89009bd830a19b4b1c59b6911ff2d">Read</a> (<span class="keyword">const</span> <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html">WTimeArg</a>&amp; timeout = <a class="code" href="struct_w_s_t_m_1_1_w_time_arg.html#a34264c61a82f2f25f87f8c9189157fab">WTimeArg::Unlimited</a> ())</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;         <span class="keywordflow">try</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;         {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#ac401ab38adce4236ce0f7627b07561fc">ReadRetry</a> (at, timeout);});</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <span class="keywordflow">catch</span> (<a class="code" href="struct_w_s_t_m_1_1_w_retry_timeout_exception.html">WRetryTimeoutException</a>&amp;)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;         {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> ();</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a797752117acedad3726b06a110f2656e"> 1086</a></span>&#160;      <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a797752117acedad3726b06a110f2656e">ReadAtomic</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         CorePtr core_p = m_data_p-&gt;m_core_v.Get (at);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         <span class="keywordflow">if</span> (!core_p)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;         }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;         </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;         <span class="keyword">auto</span> cur_p = m_data_p-&gt;m_cur_v.Get (at);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;         <span class="keywordflow">if</span> (!cur_p)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WInvalidChannelError</a> ();</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;         }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         SaveDeadNode (cur_p, at);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;         <span class="keywordflow">if</span> (cur_p-&gt;m_initial)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            m_data_p-&gt;m_cur_v.Set (cur_p-&gt;m_next_v.Get (at), at);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="keywordflow">return</span> cur_p-&gt;m_data;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;         }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;         <span class="keyword">auto</span> next_p = cur_p-&gt;m_next_v.Get (at);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;         <span class="keywordflow">if</span> (next_p)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;         {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> data_o = <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> (next_p-&gt;m_data);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            m_data_p-&gt;m_cur_v.Set (next_p, at);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="keywordflow">return</span> data_o;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;         }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> ();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;         }         </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#aaaa258752cb47ebb4cece3fe2ebcc3e6"> 1132</a></span>&#160;      std::vector&lt;Data&gt; <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#aaaa258752cb47ebb4cece3fe2ebcc3e6">ReadAll</a> ()</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> MAX_CHANNEL_READ_ALL_CONFLICTS = 5;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at){<span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#aaaa258752cb47ebb4cece3fe2ebcc3e6">ReadAll</a> (at);},</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                            <a class="code" href="struct_w_s_t_m_1_1_w_max_conflicts.html">WMaxConflicts</a> (MAX_CHANNEL_READ_ALL_CONFLICTS, <a class="code" href="struct_w_s_t_m_1_1_w_conflict_resolution.html#a51c258e38488251484ab282cb5e963abab66c5db4c2d5f2fc7a56f34862b4ca0f">WConflictResolution::RUN_LOCKED</a>));</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   </div>
<div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="class_w_s_t_m_1_1_w_channel_reader.html#a44bfcb71d9e4608c452b3880b2456aba"> 1140</a></span>&#160;      std::vector&lt;Data&gt; <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a44bfcb71d9e4608c452b3880b2456aba">ReadAll</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;         std::vector&lt;Data&gt; values;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">DataOpt</a> val_o = <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a797752117acedad3726b06a110f2656e">ReadAtomic</a> (at);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;         <span class="keywordflow">while</span> (val_o)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;         {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            values.push_back (val_o.get ());</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            val_o = <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a797752117acedad3726b06a110f2656e">ReadAtomic</a> (at);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;         }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         <span class="keywordflow">return</span> values;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keyword">using</span> CorePtr = std::shared_ptr&lt;Internal::WChannelCore&lt;Data&gt;&gt;;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keyword">struct </span>WData</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;std::shared_ptr&lt;Node&gt;</a>&gt; m_cur_v;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <span class="comment">//We keep a reference to the channel&#39;s core so that it</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;         <span class="comment">//sticks around as long as we do.  That way</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;         <span class="comment">//WReadOnlyChannel&#39;s and WChannelWriter&#39;s will still be</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         <span class="comment">//valid as long as a channel has readers.  </span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <a class="code" href="class_w_s_t_m_1_1_w_var.html">WVar&lt;CorePtr&gt;</a> m_core_v;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;         <span class="keywordtype">void</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a85295e6a8345f62fef2e174907a9de94">Release</a> (<a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;         {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            CorePtr core_p = m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">if</span> (!core_p)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;               <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            core_p-&gt;RemoveReader (at);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            <span class="keyword">auto</span> cur_p = m_cur_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">Get</a> (at);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <span class="keywordflow">if</span> (!cur_p)</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;               <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            }</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="comment">//We can&#39;t just release the current node pointer: if enough messages have been written</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="comment">//to the channel since this reader was last read from then we can end up with a stack</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="comment">//overflow when the ndoes are walked and reclaimed. To avoid this we copy all the nodes</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <span class="comment">//into another data structure so that they can&#39;t go to zero ref count during the</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="comment">//transaction. After the transaction ends we go through the container of node pointers</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="comment">//releasing each on its own in a loop so that the stack doesn&#39;t overflow.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            m_cur_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (<span class="keyword">nullptr</span>, at);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="keyword">auto</span> release_p = std::make_shared&lt;std::deque&lt;std::shared_ptr&lt;Node&gt;&gt;&gt;();</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <span class="keywordflow">while</span> (cur_p)</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;               release_p-&gt;push_back (cur_p);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;               cur_p = cur_p-&gt;m_next_v.Get (at);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            at.<a class="code" href="class_w_s_t_m_1_1_w_atomic.html#a0eb66ce8f77e9f6fcfc3b3ddd1d25f86">After</a> ([release_p]()</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                      {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                         <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; cur_p: *release_p)</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                         {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                            cur_p = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                         }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                      });</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            m_core_v.<a class="code" href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">Set</a> (CorePtr (), at);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;         }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;         ~WData ()</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;         {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <a class="code" href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">Atomically</a> ([&amp;](WAtomic&amp; at){this-&gt;<a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html#a85295e6a8345f62fef2e174907a9de94">Release</a> (at);});</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;         }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      };</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      std::unique_ptr&lt;WData&gt; m_data_p;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordtype">void</span> InitFromChannel (<span class="keyword">const</span> WChannel&lt;Data&gt;&amp; ch, WAtomic&amp; at)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;         m_data_p-&gt;Release (at);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;         m_data_p-&gt;m_cur_v.Set (ch.m_core_p-&gt;AddReader (at), at);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;         m_data_p-&gt;m_core_v.Set (ch.m_core_p, at);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keywordtype">void</span> InitFromReadonlyChannel (<span class="keyword">const</span> WReadOnlyChannel&lt;Data&gt;&amp; ch, WAtomic&amp; at)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;         <span class="keyword">auto</span> core_p = ch.m_core_v.Get (at).lock ();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;         <span class="keywordflow">if</span> (core_p)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;         {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            m_data_p-&gt;Release (at);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            m_data_p-&gt;m_cur_v.Set (core_p-&gt;AddReader (at), at);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            m_data_p-&gt;m_core_v.Set (core_p, at);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;         }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;         {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">throw</span> WInvalidChannelError ();</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;         }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   };</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4"> 1241</a></span>&#160;   <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a> <a class="code" href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4">MakeReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; ch)</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a>(ch);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l01254"></a><span class="lineno"><a class="line" href="group___channel.html#gab84920d2ddd891a3bb6f3e6e4318930e"> 1254</a></span>&#160;   <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a> <a class="code" href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4">MakeReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_channel.html">WChannel&lt;Data_t&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a>(ch, at);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="group___channel.html#ga2ccac7af3d65889363cdb16add26c0a4"> 1265</a></span>&#160;   <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a> <a class="code" href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4">MakeReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data_t&gt;</a>&amp; ch)</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a>(ch);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Data_t&gt;</div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="group___channel.html#ga2ee36b281284893215d8c64277ef23ed"> 1278</a></span>&#160;   <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a> <a class="code" href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4">MakeReader</a> (<span class="keyword">const</span> <a class="code" href="class_w_s_t_m_1_1_w_read_only_channel.html">WReadOnlyChannel&lt;Data_t&gt;</a>&amp; ch, <a class="code" href="class_w_s_t_m_1_1_w_atomic.html">WAtomic</a>&amp; at)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="class_w_s_t_m_1_1_w_channel_reader.html">WChannelReader&lt;Data_t&gt;</a>(ch, at);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;}</div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_conflict_resolution_html_a51c258e38488251484ab282cb5e963abab66c5db4c2d5f2fc7a56f34862b4ca0f"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_conflict_resolution.html#a51c258e38488251484ab282cb5e963abab66c5db4c2d5f2fc7a56f34862b4ca0f">WSTM::WConflictResolution::RUN_LOCKED</a></div><div class="ttdoc">The operation will be run with all other writes locked out thus guaranteeing that the operation can c...</div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00178">stm.h:178</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_abd107a26fe4bde3b68e8b7af87a235f9"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#abd107a26fe4bde3b68e8b7af87a235f9">WSTM::WChannel::Data</a></div><div class="ttdeci">Data_t Data</div><div class="ttdoc">The type of data sent through the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00256">channel.h:256</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_aa6b5001db31b9168d0d3062319e09203"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#aa6b5001db31b9168d0d3062319e09203">WSTM::WReadOnlyChannel::WReadOnlyChannel</a></div><div class="ttdeci">WReadOnlyChannel(const WReadOnlyChannel &amp;chan)</div><div class="ttdoc">Creates and initializes a WReadOnlyChannel object. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00397">channel.h:397</a></div></div>
<div class="ttc" id="group___core_html_ga9221933830131a2a911836b17028ab05"><div class="ttname"><a href="group___core.html#ga9221933830131a2a911836b17028ab05">NO_ATOMIC</a></div><div class="ttdeci">#define NO_ATOMIC</div><div class="ttdoc">Use this as an argument in the declaration of functions that cannot be called from within a transacti...</div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00946">stm.h:946</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a44bfcb71d9e4608c452b3880b2456aba"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a44bfcb71d9e4608c452b3880b2456aba">WSTM::WChannelReader::ReadAll</a></div><div class="ttdeci">std::vector&lt; Data &gt; ReadAll(WAtomic &amp;at)</div><div class="ttdoc">Reads all available messages from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01140">channel.h:1140</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_ac4358b217d961d8024705d09ead3bdc9"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#ac4358b217d961d8024705d09ead3bdc9">WSTM::WChannelWriter::Data</a></div><div class="ttdeci">Data_t Data</div><div class="ttdoc">The type of data sent through the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00530">channel.h:530</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a307754214a87b7ea130c895b8ebde5e2"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a307754214a87b7ea130c895b8ebde5e2">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WChannelReader &amp;reader)</div><div class="ttdoc">Creates a reader that is connected to the same channel as the given reader. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00727">channel.h:727</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_max_conflicts_html"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_max_conflicts.html">WSTM::WMaxConflicts</a></div><div class="ttdoc">Sets the the maximum number of times that the operation should be re-run due to WVar changes by other...</div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00405">stm.h:405</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_af57c7141ccb9f2cc5656b8be10ff0980"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#af57c7141ccb9f2cc5656b8be10ff0980">WSTM::WChannelWriter::Release</a></div><div class="ttdeci">void Release()</div><div class="ttdoc">Releases the underlying channel and renders the WChannelWriter object invalid. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00581">channel.h:581</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_abe73dfd492e7a5c5daa8c9fe69435750"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#abe73dfd492e7a5c5daa8c9fe69435750">WSTM::WReadOnlyChannel::Data</a></div><div class="ttdeci">Data_t Data</div><div class="ttdoc">The type of data sent through the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00373">channel.h:373</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a22ef930c845c71702eb82c1a4d4421bc"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a22ef930c845c71702eb82c1a4d4421bc">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WChannelReader &amp;reader, WAtomic &amp;at)</div><div class="ttdoc">Creates a reader that is connected to the same channel as the given reader. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00733">channel.h:733</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a1146f6eb4cd8140efa36894609e9a978"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a1146f6eb4cd8140efa36894609e9a978">WSTM::WReadOnlyChannel::Init</a></div><div class="ttdeci">void Init(const WChannel&lt; Data_t &gt; &amp;chan)</div><div class="ttdoc">Initializes a channel wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00430">channel.h:430</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a53bfc3fefcd9a9d038afc58f7f37de10"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a53bfc3fefcd9a9d038afc58f7f37de10">WSTM::WChannelReader::Data</a></div><div class="ttdeci">Data_t Data</div><div class="ttdoc">The type of data sent through the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00655">channel.h:655</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_a1479564e4c2d96522d355f41a1a204c1"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#a1479564e4c2d96522d355f41a1a204c1">WSTM::WChannelWriter::operator=</a></div><div class="ttdeci">WChannelWriter &amp; operator=(WChannelWriter &amp;&amp;c)</div><div class="ttdoc">Moves the channel connection from the given WChannelWriter object to this one. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00571">channel.h:571</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_a54792aef64fb15119a26623f26227490"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#a54792aef64fb15119a26623f26227490">WSTM::WChannelWriter::WChannelWriter</a></div><div class="ttdeci">WChannelWriter(const WChannel&lt; Data_t &gt; &amp;chan)</div><div class="ttdoc">Creates a WChannelWriter that writes to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00544">channel.h:544</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a5ef2ae7785c3fc9fd979cef7fdc3ea05"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a5ef2ae7785c3fc9fd979cef7fdc3ea05">WSTM::WChannel::Write</a></div><div class="ttdeci">void Write(const Data &amp;data, WAtomic &amp;at)</div><div class="ttdoc">Writes a message to the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00318">channel.h:318</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a080a7ef123fd63de2c90830ebb39e1d4"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a080a7ef123fd63de2c90830ebb39e1d4">WSTM::WChannel::operator=</a></div><div class="ttdeci">WChannel &amp; operator=(WChannel &amp;&amp;c)</div><div class="ttdoc">Moves the logical channel from the given WChannel object so that this object owns it...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00290">channel.h:290</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a6cc72f7d909a41ea8459400143596db5"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a6cc72f7d909a41ea8459400143596db5">WSTM::WChannelReader::operator=</a></div><div class="ttdeci">WChannelReader &amp; operator=(WChannelReader &amp;&amp;c)</div><div class="ttdoc">Moves the channel connection from the given reader to this one. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00767">channel.h:767</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_af27e6b28b0e4c70db0b5af548ae93cb0"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#af27e6b28b0e4c70db0b5af548ae93cb0">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WChannel&lt; Data &gt; &amp;ch, WAtomic &amp;at)</div><div class="ttdoc">Creates a reader that is connected to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00697">channel.h:697</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a8310dab43cb03c9c76ffade44924850c"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a8310dab43cb03c9c76ffade44924850c">WSTM::WReadOnlyChannel::Init</a></div><div class="ttdeci">void Init(const WReadOnlyChannel &amp;chan)</div><div class="ttdoc">Initializes a channel wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00450">channel.h:450</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_aebf57674122b662f9a325eaec2669d74"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#aebf57674122b662f9a325eaec2669d74">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WChannel&lt; Data &gt; &amp;ch)</div><div class="ttdoc">Creates a reader that is connected to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00691">channel.h:691</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a797752117acedad3726b06a110f2656e"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a797752117acedad3726b06a110f2656e">WSTM::WChannelReader::ReadAtomic</a></div><div class="ttdeci">DataOpt ReadAtomic(WAtomic &amp;at)</div><div class="ttdoc">Returns the first available message. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01086">channel.h:1086</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_add6c0ce499a25ed7e0150ef673231a66"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#add6c0ce499a25ed7e0150ef673231a66">WSTM::WReadOnlyChannel::WReadOnlyChannel</a></div><div class="ttdeci">WReadOnlyChannel(WReadOnlyChannel &amp;&amp;c)</div><div class="ttdoc">Moves the connection to a logical channel from the given WReadOnlyChannel object to this one...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00411">channel.h:411</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_retry_timeout_exception_html"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_retry_timeout_exception.html">WSTM::WRetryTimeoutException</a></div><div class="ttdoc">Exception thrown when a retry times out. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00838">stm.h:838</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a70e94e75dfed945f3ed349a4794f52d7"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a70e94e75dfed945f3ed349a4794f52d7">WSTM::WReadOnlyChannel::Release</a></div><div class="ttdeci">void Release()</div><div class="ttdoc">Releases the WReadOnlyChannel&#39;s connection to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00475">channel.h:475</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a780ad84da1429cf06eef9d4393c941b3"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a780ad84da1429cf06eef9d4393c941b3">WSTM::WChannelReader::DataOpt</a></div><div class="ttdeci">boost::optional&lt; Data &gt; DataOpt</div><div class="ttdoc">Data type returned by some read operations. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00662">channel.h:662</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a37c5f844fc4d4e0a4589c7d5002be9d8"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a37c5f844fc4d4e0a4589c7d5002be9d8">WSTM::WChannelReader::Valid</a></div><div class="ttdeci">bool Valid(WAtomic &amp;at) const </div><div class="ttdoc">Checks if the reader is currently connected to a channel or not. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00852">channel.h:852</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_ac02a5942ba1aadce2c7689f8b51a71cd"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#ac02a5942ba1aadce2c7689f8b51a71cd">WSTM::WChannelWriter::Write</a></div><div class="ttdeci">bool Write(const Data &amp;data)</div><div class="ttdoc">Writes the given data into the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00604">channel.h:604</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a4ce8bd6cbe435abedeafb15a6e23ee56"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a4ce8bd6cbe435abedeafb15a6e23ee56">WSTM::WReadOnlyChannel::WReadOnlyChannel</a></div><div class="ttdeci">WReadOnlyChannel()</div><div class="ttdoc">Creates an uninitialized object. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00378">channel.h:378</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_atomic_html_a0eb66ce8f77e9f6fcfc3b3ddd1d25f86"><div class="ttname"><a href="class_w_s_t_m_1_1_w_atomic.html#a0eb66ce8f77e9f6fcfc3b3ddd1d25f86">WSTM::WAtomic::After</a></div><div class="ttdeci">void After(WAfterFunc func)</div><div class="ttdoc">Adds a function to call after the top-level transaction that is currently running commits successfull...</div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html">WSTM::WReadOnlyChannel</a></div><div class="ttdoc">Read only version of a WChannel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00367">channel.h:367</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a19a50aec1253c74f28093d6f35dc853f"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a19a50aec1253c74f28093d6f35dc853f">WSTM::WChannel::SetReaderInitFunc</a></div><div class="ttdeci">void SetReaderInitFunc(WReaderInitFunc readerInit)</div><div class="ttdoc">Sets the reader initialization function for this channel replacing any existing reader initialization...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00306">channel.h:306</a></div></div>
<div class="ttc" id="group___core_html_gac553425cfd41fcf60669313f91a162a3"><div class="ttname"><a href="group___core.html#gac553425cfd41fcf60669313f91a162a3">WSTM::Retry</a></div><div class="ttdeci">WSTM_LIBAPI void Retry(WAtomic &amp;at, const WTimeArg &amp;timeout=WTimeArg::Unlimited())</div><div class="ttdoc">If a function passed to Atomically determines that one of the WVar objects&#39;s that it has read has a v...</div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_aaa33415cac0a708893336f50ec365f21"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#aaa33415cac0a708893336f50ec365f21">WSTM::WChannelReader::Peek</a></div><div class="ttdeci">DataOpt Peek(WAtomic &amp;at)</div><div class="ttdoc">Returns the first available message without removing it from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00928">channel.h:928</a></div></div>
<div class="ttc" id="namespace_w_s_t_m_html"><div class="ttname"><a href="namespace_w_s_t_m.html">WSTM</a></div><div class="ttdoc">The main namespace of the transactional memory system. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00047">channel.h:47</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a150f3f40aa8d88f3515794ac5066f18a"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a150f3f40aa8d88f3515794ac5066f18a">WSTM::WChannel::WWriteSignal</a></div><div class="ttdeci">boost::signals2::signal&lt; void()&gt; WWriteSignal</div><div class="ttdoc">Signal emitted when the channel is written to. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_invalid_channel_error_html"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_invalid_channel_error.html">WSTM::WInvalidChannelError</a></div><div class="ttdoc">Exception thrown if an invalid channel is used. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00223">channel.h:223</a></div></div>
<div class="ttc" id="stm_8h_html"><div class="ttname"><a href="stm_8h.html">stm.h</a></div><div class="ttdoc">The core of the transactional memory system. </div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_ab4782bc8f19b2fce2693c949ea0f3386"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#ab4782bc8f19b2fce2693c949ea0f3386">WSTM::WChannelWriter::Write</a></div><div class="ttdeci">bool Write(const Data &amp;data, WAtomic &amp;at)</div><div class="ttdoc">Writes the given data into the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00618">channel.h:618</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_ab3a4586715998fcaab63823dae4e9695"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#ab3a4586715998fcaab63823dae4e9695">WSTM::WChannelWriter::WChannelWriter</a></div><div class="ttdeci">WChannelWriter()</div><div class="ttdoc">Creates an invalid WChannelWriter object. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00536">channel.h:536</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_var_html_a0f80054e64f3cdd618217f906f036ef8"><div class="ttname"><a href="class_w_s_t_m_1_1_w_var.html#a0f80054e64f3cdd618217f906f036ef8">WSTM::WVar::Set</a></div><div class="ttdeci">void Set(param_type val, WAtomic &amp;at)</div><div class="ttdoc">Sets the value of the variable. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l01136">stm.h:1136</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a9659a4e588a67fa4c38d74ea2730e768"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a9659a4e588a67fa4c38d74ea2730e768">WSTM::WChannelReader::Init</a></div><div class="ttdeci">void Init(const WChannel&lt; Data &gt; &amp;ch, WAtomic &amp;at)</div><div class="ttdoc">Connects this reader to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00805">channel.h:805</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a05e8434e8fb9a28f20c6be5e836cb39a"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a05e8434e8fb9a28f20c6be5e836cb39a">WSTM::WReadOnlyChannel::Init</a></div><div class="ttdeci">void Init(const WChannel&lt; Data_t &gt; &amp;chan, WAtomic &amp;at)</div><div class="ttdoc">Initializes a channel wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00434">channel.h:434</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a4f8b7c5cadf15ce0f0471f9c7d26d4c0"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a4f8b7c5cadf15ce0f0471f9c7d26d4c0">WSTM::WChannelReader::RetryIfEmpty</a></div><div class="ttdeci">void RetryIfEmpty(WAtomic &amp;at, const WTimeArg &amp;timeout=WTimeArg::Unlimited())</div><div class="ttdoc">Checks for available messages. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00891">channel.h:891</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a75e70c90a0b854743ab8b292269edca0"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a75e70c90a0b854743ab8b292269edca0">WSTM::WReadOnlyChannel::ConnectToWriteSignal</a></div><div class="ttdeci">auto ConnectToWriteSignal(Handler_t &amp;&amp;h, NO_ATOMIC)</div><div class="ttdoc">Connects a handler to the channels write signal. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00498">channel.h:498</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html">WSTM::WChannel</a></div><div class="ttdoc">The write end of a transactional multi-cast channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00244">channel.h:244</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_ad764ef52b2c077febdd2000f167d39b1"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#ad764ef52b2c077febdd2000f167d39b1">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WReadOnlyChannel&lt; Data &gt; &amp;ch, WAtomic &amp;at)</div><div class="ttdoc">Creates a reader that is connected to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00709">channel.h:709</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html">WSTM::WChannelWriter</a></div><div class="ttdoc">A writable reference to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00524">channel.h:524</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_var_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_var.html">WSTM::WVar</a></div><div class="ttdoc">A transactional variable. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l01024">stm.h:1024</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_ac401ab38adce4236ce0f7627b07561fc"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#ac401ab38adce4236ce0f7627b07561fc">WSTM::WChannelReader::ReadRetry</a></div><div class="ttdeci">DataOpt ReadRetry(WAtomic &amp;at, const WTimeArg &amp;timeout=WTimeArg::Unlimited())</div><div class="ttdoc">Returns the first available message. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01015">channel.h:1015</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a66184ff1cf5e75906fed71e39d70fef3"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a66184ff1cf5e75906fed71e39d70fef3">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00676">channel.h:676</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a86eeae773103faa4f87cb9ba5d6edb29"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a86eeae773103faa4f87cb9ba5d6edb29">WSTM::WReadOnlyChannel::WReadOnlyChannel</a></div><div class="ttdeci">WReadOnlyChannel(const WChannel&lt; Data &gt; &amp;chan)</div><div class="ttdoc">Creates and initializes a WReadOnlyChannel object. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00386">channel.h:386</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_var_html_ac9cee87dc82e4e8e15986dc52e859422"><div class="ttname"><a href="class_w_s_t_m_1_1_w_var.html#ac9cee87dc82e4e8e15986dc52e859422">WSTM::WVar::Get</a></div><div class="ttdeci">param_type Get(WAtomic &amp;at) const </div><div class="ttdoc">Gets the variable&#39;s current value. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l01086">stm.h:1086</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html">WSTM::WChannelReader</a></div><div class="ttdoc">The read end of a multi-cast channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00649">channel.h:649</a></div></div>
<div class="ttc" id="group__atomically__options_html_ga4c9bddb0da5340c2288e5b68c5a1ee39"><div class="ttname"><a href="group__atomically__options.html#ga4c9bddb0da5340c2288e5b68c5a1ee39">WSTM::Atomically</a></div><div class="ttdeci">auto Atomically(const Op_t &amp;op, const Options_t &amp;...options) -&gt; typename std::enable_if&lt; std::is_same&lt; void, decltype(op(std::declval&lt; WAtomic &amp; &gt;()))&gt;::value, void &gt;::type    </div><div class="ttdoc">Runs the given operation in an atomic fashion. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00871">stm.h:871</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_a335bac4cf538ec2b5e5e3385fb0ad385"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#a335bac4cf538ec2b5e5e3385fb0ad385">WSTM::WChannelWriter::WChannelWriter</a></div><div class="ttdeci">WChannelWriter(WChannelWriter &amp;&amp;c)</div><div class="ttdoc">Moves the channel connection from the given WChannelWriter object to this one. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00567">channel.h:567</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_atomic_html"><div class="ttname"><a href="class_w_s_t_m_1_1_w_atomic.html">WSTM::WAtomic</a></div><div class="ttdoc">Functions passed to Atomically must take a reference to one of these objects as their only argument...</div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00480">stm.h:480</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_ae75d13e1963d7601239f0ff7a1277ece"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#ae75d13e1963d7601239f0ff7a1277ece">WSTM::WChannelReader::Init</a></div><div class="ttdeci">void Init(const WReadOnlyChannel&lt; Data &gt; &amp;ch)</div><div class="ttdoc">Connects this reader to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00810">channel.h:810</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_time_arg_html_a34264c61a82f2f25f87f8c9189157fab"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_time_arg.html#a34264c61a82f2f25f87f8c9189157fab">WSTM::WTimeArg::Unlimited</a></div><div class="ttdeci">static WTimeArg Unlimited()</div><div class="ttdoc">Constructs an unlimited object. </div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_aa0ef9da779746135a92ec9e335c893bc"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#aa0ef9da779746135a92ec9e335c893bc">WSTM::WChannel::WChannel</a></div><div class="ttdeci">WChannel(WReaderInitFunc m_readerInit=WReaderInitFunc())</div><div class="ttdoc">Creates an empty channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00274">channel.h:274</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a98e7bce663cccfaee70b89e9051389b7"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a98e7bce663cccfaee70b89e9051389b7">WSTM::WChannel::WChannel</a></div><div class="ttdeci">WChannel(WChannel &amp;&amp;c)</div><div class="ttdoc">Moves the logical channel from the given WChannel object so that this object owns it...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00286">channel.h:286</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_writer_html_a1107e3c7cb809f280e7d2537ff4d201b"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_writer.html#a1107e3c7cb809f280e7d2537ff4d201b">WSTM::WChannelWriter::Init</a></div><div class="ttdeci">void Init(const WChannel&lt; Data_t &gt; &amp;chan)</div><div class="ttdoc">Connects the writer to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00554">channel.h:554</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_af11fef99dcf97ec0f1482bfe04cef5de"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#af11fef99dcf97ec0f1482bfe04cef5de">WSTM::WReadOnlyChannel::Init</a></div><div class="ttdeci">void Init(const WReadOnlyChannel &amp;chan, WAtomic &amp;at)</div><div class="ttdoc">Initializes a channel wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00454">channel.h:454</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_var_html_a8c7b758c1fc6b797541ae3bcff90e9c7"><div class="ttname"><a href="class_w_s_t_m_1_1_w_var.html#a8c7b758c1fc6b797541ae3bcff90e9c7">WSTM::WVar::GetReadOnly</a></div><div class="ttdeci">Type GetReadOnly() const </div><div class="ttdoc">Gets the variable&#39;s current value. </div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l01124">stm.h:1124</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_aff402f24cfa6cda54b4353fbd0595e93"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#aff402f24cfa6cda54b4353fbd0595e93">WSTM::WReadOnlyChannel::Release</a></div><div class="ttdeci">void Release(WAtomic &amp;at)</div><div class="ttdoc">Releases the WReadOnlyChannel&#39;s connection to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00479">channel.h:479</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a49d89009bd830a19b4b1c59b6911ff2d"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a49d89009bd830a19b4b1c59b6911ff2d">WSTM::WChannelReader::Read</a></div><div class="ttdeci">DataOpt Read(const WTimeArg &amp;timeout=WTimeArg::Unlimited())</div><div class="ttdoc">Returns the first available message. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01064">channel.h:1064</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a214da37d360303c51143019c72bfe96a"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a214da37d360303c51143019c72bfe96a">WSTM::WChannelReader::Release</a></div><div class="ttdeci">void Release(WAtomic &amp;at)</div><div class="ttdoc">Releases the WChannelReader&#39;s reference to the WChannel rendering the WChannelReader invalid...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00833">channel.h:833</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a6d12c7808a3f2d953f61ce94bf5edf36"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a6d12c7808a3f2d953f61ce94bf5edf36">WSTM::WChannel::WReaderInitFunc</a></div><div class="ttdeci">std::function&lt; Data_t(WAtomic &amp;)&gt; WReaderInitFunc</div><div class="ttdoc">Intial message generation function. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00264">channel.h:264</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_read_only_channel_html_a89169c9d91bf50be56413b2bd53aec12"><div class="ttname"><a href="class_w_s_t_m_1_1_w_read_only_channel.html#a89169c9d91bf50be56413b2bd53aec12">WSTM::WReadOnlyChannel::operator=</a></div><div class="ttdeci">WReadOnlyChannel &amp; operator=(WReadOnlyChannel &amp;&amp;c)</div><div class="ttdoc">Moves the connection to a logical channel from the given WReadOnlyChannel object to this one...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00415">channel.h:415</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a85295e6a8345f62fef2e174907a9de94"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a85295e6a8345f62fef2e174907a9de94">WSTM::WChannelReader::Release</a></div><div class="ttdeci">void Release()</div><div class="ttdoc">Releases the WChannelReader&#39;s reference to the WChannel rendering the WChannelReader invalid...</div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00828">channel.h:828</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a898cc03dbe4042b846ebb3df4a24aafa"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a898cc03dbe4042b846ebb3df4a24aafa">WSTM::WChannelReader::Wait</a></div><div class="ttdeci">bool Wait(const WTimeArg &amp;timeout=WTimeArg::Unlimited())</div><div class="ttdoc">Waits for messages to become available. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00869">channel.h:869</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a181dd845e2f95f3600b28b766ffd4ae4"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a181dd845e2f95f3600b28b766ffd4ae4">WSTM::WChannel::ConnectToWriteSignal</a></div><div class="ttdeci">auto ConnectToWriteSignal(Handler_t &amp;&amp;h)</div><div class="ttdoc">Connects a handler to the channels write signal. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00351">channel.h:351</a></div></div>
<div class="ttc" id="group___channel_html_ga79179fcd729920a6f198fcb5948055f4"><div class="ttname"><a href="group___channel.html#ga79179fcd729920a6f198fcb5948055f4">WSTM::MakeReader</a></div><div class="ttdeci">WChannelReader&lt; Data_t &gt; MakeReader(const WChannel&lt; Data_t &gt; &amp;ch)</div><div class="ttdoc">Creates a reader for the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01241">channel.h:1241</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a67e303476bff595e8aa537d1bcda524f"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a67e303476bff595e8aa537d1bcda524f">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(const WReadOnlyChannel&lt; Data &gt; &amp;ch)</div><div class="ttdoc">Creates a reader that is connected to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00703">channel.h:703</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a9b527fc69da36e7e3ec572b1af21acb7"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a9b527fc69da36e7e3ec572b1af21acb7">WSTM::WChannelReader::Peek</a></div><div class="ttdeci">DataOpt Peek()</div><div class="ttdoc">Returns the first available message without removing it from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00923">channel.h:923</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_ae68b5d4b3fbe99f1cec40f24c1f20594"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#ae68b5d4b3fbe99f1cec40f24c1f20594">WSTM::WChannelReader::Copy</a></div><div class="ttdeci">void Copy(const WChannelReader &amp;reader, WAtomic &amp;at)</div><div class="ttdoc">Creates a reader that is connected to the same channel as the given reader. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00739">channel.h:739</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_channel_error_html"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_channel_error.html">WSTM::WChannelError</a></div><div class="ttdoc">Base class for exceptions thrown by WChannel functions. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00207">channel.h:207</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a6893c3b42da426b6fb5d03166505d22f"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a6893c3b42da426b6fb5d03166505d22f">WSTM::WChannelReader::~WChannelReader</a></div><div class="ttdeci">virtual ~WChannelReader()</div><div class="ttdoc">Desctructor. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00668">channel.h:668</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_channel_error_html_a74296d177caedd8f58960a6a8c6f7df1"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_channel_error.html#a74296d177caedd8f58960a6a8c6f7df1">WSTM::WChannelError::m_msg</a></div><div class="ttdeci">std::string m_msg</div><div class="ttdoc">The exception&#39;s message. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00217">channel.h:217</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_html_a989445aae77943e93c08901b5c5f8a6a"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel.html#a989445aae77943e93c08901b5c5f8a6a">WSTM::WChannel::Write</a></div><div class="ttdeci">void Write(const Data &amp;data)</div><div class="ttdoc">Writes a message to the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00329">channel.h:329</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_aaaa258752cb47ebb4cece3fe2ebcc3e6"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#aaaa258752cb47ebb4cece3fe2ebcc3e6">WSTM::WChannelReader::ReadAll</a></div><div class="ttdeci">std::vector&lt; Data &gt; ReadAll()</div><div class="ttdoc">Reads all available messages from the channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l01132">channel.h:1132</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a34eca1086f535ae69ced876dffb2f8f8"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a34eca1086f535ae69ced876dffb2f8f8">WSTM::WChannelReader::Init</a></div><div class="ttdeci">void Init(const WChannel&lt; Data &gt; &amp;ch)</div><div class="ttdoc">Connects this reader to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00800">channel.h:800</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a60a9518b7dc0d6074cb6efb0a9a2a6d4"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a60a9518b7dc0d6074cb6efb0a9a2a6d4">WSTM::WChannelReader::Init</a></div><div class="ttdeci">void Init(const WReadOnlyChannel&lt; Data &gt; &amp;ch, WAtomic &amp;at)</div><div class="ttdoc">Connects this reader to the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00815">channel.h:815</a></div></div>
<div class="ttc" id="struct_w_s_t_m_1_1_w_time_arg_html"><div class="ttname"><a href="struct_w_s_t_m_1_1_w_time_arg.html">WSTM::WTimeArg</a></div><div class="ttdoc">A time value that can be initialized using either a std::chrono::time_point or a std::chrono::duratio...</div><div class="ttdef"><b>Definition:</b> <a href="stm_8h_source.html#l00189">stm.h:189</a></div></div>
<div class="ttc" id="class_w_s_t_m_1_1_w_channel_reader_html_a330cd2ed89a1f60c94f1584de0df422d"><div class="ttname"><a href="class_w_s_t_m_1_1_w_channel_reader.html#a330cd2ed89a1f60c94f1584de0df422d">WSTM::WChannelReader::WChannelReader</a></div><div class="ttdeci">WChannelReader(WChannelReader &amp;&amp;c)</div><div class="ttdoc">Moves the channel connection from the given reader to this one. </div><div class="ttdef"><b>Definition:</b> <a href="channel_8h_source.html#l00763">channel.h:763</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
